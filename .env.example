# File: .env.example
# Description: 环境变量模板（配置契约）
# Author: jinmozhe
# Created: 2025-11-24

# ==============================================================================
# 1. General Application Settings (应用通用配置)
# ==============================================================================

# 运行环境: local, dev, prod
ENVIRONMENT=local

# 调试模式 (生产环境必须 False，本地开发可设为 True)
DEBUG=False

# 项目名称
PROJECT_NAME="FastAPI V3.0 Project"

# API V1 前缀
API_V1_STR="/api/v1"

# 密钥 (生产环境必须生成高强度随机字符串，长度 >= 32)
# 生成命令: openssl rand -hex 32
SECRET_KEY="CHANGE_ME_IN_PROD_TO_A_SECURE_RANDOM_STRING"

# CORS 允许来源
# 格式：JSON 列表，由 Pydantic 自动解析
# 生产环境示例: ["https://example.com", "https://api.example.com"]
BACKEND_CORS_ORIGINS=["http://localhost:8000", "http://localhost:3000"]

# ==============================================================================
# 2. Database Settings (数据库配置 - 强制 PostgreSQL)
# ==============================================================================

# PostgreSQL 连接基础信息
POSTGRES_SERVER=localhost
POSTGRES_USER=postgres
POSTGRES_PASSWORD=postgres
POSTGRES_DB=app_db
POSTGRES_PORT=5432

# 连接池配置 (Pool Settings)
# 生产环境根据并发量调整
DB_POOL_SIZE=20
DB_MAX_OVERFLOW=10
DB_POOL_PRE_PING=True
DB_POOL_TIMEOUT=30
DB_POOL_RECYCLE=1800

# 完整连接串覆盖 (可选)
# 如果设置了此值，config.py 将优先使用此值，忽略上面的拆分字段
# 格式必须为: postgresql+asyncpg://user:pass@host:port/dbname
# SQLALCHEMY_DATABASE_URI=postgresql+asyncpg://postgres:postgres@localhost:5432/app_db

# ==============================================================================
# 3. Logging Settings (Loguru 日志配置)
# ==============================================================================

# 日志级别: DEBUG, INFO, WARNING, ERROR, CRITICAL
LOG_LEVEL=INFO

# 是否输出为 JSON 格式 (生产环境建议 True)
LOG_JSON_FORMAT=False

# 是否启用文件日志 (local 环境可设为 False)
LOG_FILE_ENABLED=False

# 日志文件目录
LOG_DIR=logs

# 日志轮转策略: "1 hour", "00:00"(每天午夜), "500 MB" 等
LOG_ROTATION=1 hour

# 日志保留时间: "7 days", "30 days", "1 month" 等
LOG_RETENTION=7 days

# 日志压缩格式: "zip", "gz", "tar.gz" 等
LOG_COMPRESSION=zip

# 是否启用诊断信息 (生产环境建议 False，防止泄露敏感信息)
LOG_DIAGNOSE=True

# ==============================================================================
# 4. Redis Settings (缓存与 Token 存储)
# ==============================================================================

# Redis 连接串 (Docker 默认无密码: redis://localhost:6379/0)
# 生产环境示例: redis://:password@redis-host:6379/0
REDIS_URL=redis://localhost:6379/0

# ==============================================================================
# 5. Security & Authentication (JWT 安全配置)
# ==============================================================================

# Access Token 有效期 (分钟) - 建议 15-30 分钟
ACCESS_TOKEN_EXPIRE_MINUTES=30

# Refresh Token 有效期 (天) - 建议 7-30 天
REFRESH_TOKEN_EXPIRE_DAYS=7

# JWT 签名算法
ALGORITHM=HS256
